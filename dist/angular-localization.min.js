/**
 * angular-localization :: v1.2.0 :: 2015-03-14
 * web: https://github.com/doshprompt/angular-localization
 *
 * Copyright (c) 2015 | Rahul Doshi
 * License: MIT
 */
!function(a){"use strict";a.module("ngLocalize.Config",[]).value("localeConf",{basePath:"languages",defaultLocale:"en-US",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::"}),a.module("ngLocalize.Events",[]).constant("localeEvents",{resourceUpdates:"ngLocalizeResourcesUpdated",localeChanges:"ngLocalizeLocaleChanged"}),a.module("ngLocalize",["ngSanitize","ngLocalize.Config","ngLocalize.Events","ngLocalize.InstalledLanguages"]).service("locale",["$injector","$http","$q","$log","$rootScope","$window","localeConf","localeEvents","localeSupported","localeFallbacks",function(b,c,d,e,f,g,h,i,j,k){function l(a){return a&&a.length&&B.test(a)}function m(a){var b=a?a.split("."):"",c="";return b.length>1&&(c=b.slice(0,-1).join(".")),c}function n(a){var b=a?a.split("."):[],c="";return b.length&&(c=b[b.length-1]),c}function o(a,b){var c,d=null,e=a?a.split("."):[];if(e.length>1)for(d=y[b],c=0;c<e.length-1;c++){if(!d[e[c]]){d=null;break}d=d[e[c]]}return d}function p(a,b){var d,g=a?a.split("."):"",j=y[b],k=h.basePath+"/"+b;if(g.length>1){for(d=0;d<g.length-1;d++)j[g[d]]||(j[g[d]]={}),j=j[g[d]],k+="/"+g[d];j._loading||(j._loading=!0,k+=h.fileExtension,c.get(k).success(function(b){var c,d=m(a);for(c in b)b.hasOwnProperty(c)&&(j[c]=b[c]);delete j._loading,f.$broadcast(i.resourceUpdates),z[d]&&z[d].resolve(d)}).error(function(){e.error("[localizationService] Failed to load: "+k),delete j._loading}))}}function q(a,b){var c,e;return a=a||h.langFile,e=a+"._LOOKUP_",c=o(e,b),z[a]||(z[a]=d.defer()),c&&!c._loading?z[a].resolve(a):c||p(e,b),z[a].promise}function r(b){var c,e,f;if(a.isString(b))c=b.split(",");else{if(!a.isArray(b))throw new Error("locale.ready requires either an Array or comma-separated list.");c=b}if(f=[],c.length>1)c.forEach(function(a){for(var b=0;b<C.length;b++)f.push(q(a,C[b]))});else for(var g=0;g<C.length;g++)f.push(q(b,C[g]));return e=d.all(f)}function s(b,c){var d=b,e=0;return c&&(a.isArray(c)?a.forEach(c,function(a,b){d=d.replace("%"+(b+1),a),d=d.replace("{"+(b+1)+"}",a)}):a.forEach(c,function(a,b){++e,d=d.replace("{"+b+"}",a),d=d.replace("%"+b,a),d=d.replace("%"+e,a),d=d.replace("{"+e+"}",a)})),d=d.replace(/\n/g,"<br>")}function t(a,b){for(var c=0;c<C.length;c++){var d=u(a,b,C[c]);if(null!=d)return d}return e.info("[localizationService] Key not found: "+a),"%%KEY_NOT_FOUND%%"}function u(b,c,d){var e,f,g,i=!1;if(a.isString(b)&&!c&&-1!=b.indexOf(h.delimiter)&&(g=b.split(h.delimiter),b=g[0],c=a.fromJson(g[1])),i=l(b),!i)return b;if(a.isObject(c)||(c=[c]),e=o(b,d),e&&!e._loading){if(f=n(b),e[f])return s(e[f],c)}else e||p(b,d);return null}function v(b){var c,d;a.isString(b)?(b=b.trim(),d=null!=j[k[b.split("-")[0]]]?k[b.split("-")[0]]:h.defaultLocale,null!=j[b]?c=b:(c=d,d=h.defaultLocale)):c=h.defaultLocale,null==y&&(y={},a.forEach(j,function(a,b){y[b]={}})),c!=x&&(z={},x=c,C=[],c!=h.defaultLocale&&C.push(c),d!=h.defaultLocale&&C.push(d),C.push(h.defaultLocale),f.$broadcast(i.localeChanges,x),f.$broadcast(i.resourceUpdates),A&&A.put(h.cookieName,c))}function w(){return x}var x,y,z,A,B=new RegExp("^[\\w\\.-]+\\.[\\w\\s\\.-]+\\w(:.*)?$"),C=[];return h.persistSelection&&b.has("$cookieStore")&&(A=b.get("$cookieStore")),v(A?A.get(h.cookieName):g.navigator.userLanguage||g.navigator.language),{ready:r,isToken:l,getPath:m,getKey:n,setLocale:v,getLocale:w,getString:t}}]).filter("i18n",["locale",function(a){return function(b,c){return a.getString(b,c)}}]).directive("i18n",["$sce","locale","localeEvents","localeConf",function(b,c,d,e){function f(a,c){c!==a.html()&&a.html(b.getTrustedHtml(c))}function g(a,b,d){c.isToken(b)?c.ready(c.getPath(b)).then(function(){f(a,c.getString(b,d))}):f(a,b)}return function(b,c,f){var h;f.$observe("i18n",function(a,b){a&&a!=b&&g(c,a,h)}),a.forEach(f.$attr,function(a,b){e.observableAttrs.test(a)&&f.$observe(b,function(a,d){(a&&a!=d||!h||!h[b])&&(h=h||{},h[b]=f[b],g(c,f.i18n,h))})}),b.$on(d.resourceUpdates,function(){g(c,f.i18n,h)}),b.$on(d.localeChanges,function(){g(c,f.i18n,h)})}}]).directive("i18nAttr",["locale","localeEvents",function(a,b){return function(c,d,e){function f(b,d){var f,h=c.$eval(d),i=[];for(var j in h)f=h[j],a.isToken(f)&&-1==i.indexOf(a.getPath(f))&&i.push(a.getPath(f));a.ready(i).then(function(){var b="";for(var c in h)f=h[c],b=a.getString(f),g[c]!==b&&e.$set(c,g[c]=b)})}var g={};e.$observe("i18nAttr",function(a,b){a&&a!=b&&f(d,a)}),c.$on(b.resourceUpdates,function(){f(d,e.i18nAttr)}),c.$on(b.localeChanges,function(){f(d,e.i18nAttr)})}}]),a.module("ngLocalize.InstalledLanguages",[]).value("localeSupported",{"en-US":"English (United States)","aa-XX":"English (XX)","aa-YY":"English (YY)"}).value("localeFallbacks",{en:"en-US",aa:"aa-XX"}),a.module("ngLocalize.Version",[]).constant("localeVer","1.2.0")}(window.angular,window,document);
//# sourceMappingURL=angular-localization.min.map